14 プログラム


構文 

  Program : 
    SourceElements[opt] 
    
  SourceElements : 
    SourceElement 
    SourceElements SourceElement 
    
  SourceElement : 
    Statement 
    FunctionDeclaration 

意味

生成規則 Program : SourceElements[opt] は次のように評価されます。

1. Use Strict 指示子がSourceElementのDirective Prologue(14.1)に含まれているか、10.1.1の条件に当てはまれば、このProgramのコードはstrictモードのコードです。もし、このProgramのコードがstrictモードのコードであれば、SourceElementsはstrictモードのコードとして以下のステップで評価されます。そうでなければSourceElementsは以下のステップでstrictモードではないコードとして評価されます。
2. SourceElementsが存在しなければ、(normal, empty, empty)を返します。
3. progCxtを10.4.1で述べられたグローバルコードの新しい実行コンテキストとします。
4. resultをSourceElementsを評価した結果とします。
5. 実行コンテキストprogCxtを終了します。
6. resultを返します。

注意：Programの評価の初期化およびその評価の結果を扱う手順は、ECMAScriptの実装によって定義されているのであり、この仕様によってではありません。

生成規則 SourceElements : SourceElements SourceElement は以下のように評価されます。

1. headResultをSourceElementsを評価した結果とします。
2. もしheadResultが途中で完了したのであれば、headResultを返します。
3. tailResultをSourceElementを評価した結果とします。
4. もしtrailResult.valueが空であれば、VをheadResult.valueとし、そうでなければVをtrailResult.valueとします。
5. (trailResult.type, V, trailResult.target)を返します。

生成規則 SourceElement : Statementは以下のように評価されます。

1. Statementを評価した結果を返します。

生成規則 SourceElement : FunctionDeclaration は以下のように評価されます。

1. (normal, empty, empty)を返します。


14.1 Directive Prologue と Use Strict指示子


Directive Prologueは(途中)

Use Strice指示子は、StringLiteralの厳密な文字の並びが"use strict"もしくは'use strict'のどちらかであるDirective PrologueにおけるExpressionStatementです。Use Strict指示子はEscapeSequenceやLineContinuationを含んではいけません。

Directive Prologueは二つ以上のUse Strict指示子を含むことができます。ただし、その場合に実装によっては警告を出力するかもしれません。

注意：Directive Prologueの生成規則ExpressionStatementは、含まれているSourceElements生成規則の評価の間に、普通は評価されます。Directive Prologueに現れるUse Strict指示子以外のExpressionStatement生成規則に、実装に依存した意味合いを定義しているかもしれません。もし適切な通知機構が存在するのであれば、Use Strict指示子ではないExpressionStatementか、実装によって定義された意味を持たないExpressionStatementが、Directive Prologueに現れたことを警告として出力するよう実装すべきです。
